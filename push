#!/usr/bin/env bash
set -euo pipefail

# Resolve symlinks portably (BSD/macOS readlink lacks -f)
SOURCE="${BASH_SOURCE[0]}"
while [ -L "$SOURCE" ]; do
  DIR="$(cd "$(dirname "$SOURCE")" && pwd)"
  SOURCE="$(readlink "$SOURCE")"
  [[ "$SOURCE" != /* ]] && SOURCE="$DIR/$SOURCE"
done
ROOT_DIR="$(cd "$(dirname "$SOURCE")" && pwd)"

# Default to TUI unless explicitly overridden by caller.
: "${PUSH_TUI_ENABLED:=1}"
export PUSH_TUI_ENABLED

exec node "$ROOT_DIR/cli/cli.mjs" "$@"
